{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile/profile.css' %}">
{% endblock %}

{% block title %}
User Profile - {{ user.username }}
{% endblock %}

{% block content %}
<div class="container text-center">
    <!-- Profile header section -->
    <div class="hero-content">
        <h1 class="hero-title">User Profile - {{ user.username }}</h1>
        <div class="breadcrumb-container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Profile</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- Display user details -->
    <p class="lead mt-4">Welcome, {{ user.first_name }} {{ user.last_name }}!</p>

    <ul class="user-attributes-row">
        <li><i class="fas fa-user"></i> <strong>Username:</strong> {{ user.username }}</li>
        <li><i class="fas fa-envelope"></i> <strong>Email:</strong> {{ user.email }}</li>
        <li><i class="fas fa-id-badge"></i> <strong>First Name:</strong> {{ user.first_name }}</li>
        <li><i class="fas fa-id-badge"></i> <strong>Last Name:</strong> {{ user.last_name }}</li>
        <li><i class="fas fa-phone"></i> <strong>Phone Number:</strong> {{ profile.phone_number }}</li>
    </ul>

    <h2 class="mt-4">Address</h2>
    <ul class="address-attributes-row">
        <li><i class="fas fa-home"></i> <strong>Street Address 1:</strong> {{ profile.street_address1 }}</li>
        <li><i class="fas fa-home"></i> <strong>Street Address 2:</strong> {{ profile.street_address2 }}</li>
        <li><i class="fas fa-city"></i> <strong>Town/City:</strong> {{ profile.town_city }}</li>
        <li><i class="fas fa-flag"></i> <strong>County/State:</strong> {{ profile.county_state }}</li>
        <li><i class="fas fa-map-pin"></i> <strong>Postal Code:</strong> {{ profile.postal_code }}</li>
        <li><i class="fas fa-globe"></i> <strong>Country:</strong> {{ profile.country }}</li>
    </ul>

    <h2 class="mt-4">Confirmed Bookings</h2>
    {% if confirmed_bookings %}
        <ul class="list-group">
            {% for booking in confirmed_bookings %}
                <li class="list-group-item">
                    <strong>Yacht:</strong> {{ booking.yacht.name }}<br>
                    <strong>From:</strong> {{ booking.start_date }} <strong>To:</strong> {{ booking.end_date }}<br>
                    <strong>Total Cost:</strong> ${{ booking.total_cost }}<br>
                    <strong>Status:</strong> {{ booking.get_status_display }}<br>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No confirmed bookings found.</p>
    {% endif %}

    <h2 class="mt-4">Profile Actions</h2>
    {% if user.is_authenticated %}
        <!-- Profile actions like edit, logout -->
        <a href="{% url 'profile_edit' %}" class="btn btn-primary">Edit Profile</a>
        <a href="{% url 'account_logout' %}" class="btn btn-danger">Logout</a>
    {% else %}
        <div class="alert alert-info mt-4" role="alert">
            <h3>Please <a href="{% url 'account_login' %}" class="text-primary font-weight-bold align-top">sign in</a> to manage your profile.</h3>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/profile.js' %}"></script>
{% endblock %}
